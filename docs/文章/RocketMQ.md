RocketMQ

- 生产者：Producer
  - 消息类型
    - 普通消息
    - 分区有序消息
    - 延迟消息：18 个延迟等级
    - 事务消息
  - 高可用
    - 重试机制：16 个重试等级，从 1s 到 2h
- 消费者：Consumer
  - 消费模式
    - 集群消费：默认消费方式，消费进度保存在 broker，消费进度不会出错
    - 广播消费：每个消费组中的实例消费所有消息，比如刷新应用服务器中的缓存，消费进度保存在客户端，可能导致部分消息没有消费
  - 如何保证可靠消费
    - 正常消费
    - 重试消费
    - 死信消费
  - 消费方式
    - Pull
    - Push
  - 消息过滤
    - Broker 使用 Hash 过滤，位运算快速过滤海量消息
- Namesrv
  - 定义：注册中心，类似于 Kafka 的 Zookeeper
  - 作用：保存元数据、提高 broker 可用性
  - 功能模块
    - Topic 路由管理模块
    - Remoting 通信模块
    - 定时任务模块
    - KV 管理模块
- Broker
  - 作用：处理 TCP 请求、存储消息
  - 目录结构
    - consumequeue 目录
      - Topic1
        - 0
        - 1
    - config 目录
      - consumerOffset.json
      - delayOffset.json
      - consumerFilter.json
      - topics.json
      - subscriptionGroup.json
    - commitlog 目录
      - 000000000023622320128
      - 000000000025769803776
    - index 目录
      - 20191104111040896
    - abort
    - lock
    - checkpoint：最近一次正常运行时的状态
