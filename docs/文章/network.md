# 计算机网络面试题

## 输入网址后发生了什么？

应用层 DNA 解析，传输层 TCP 连接，网络层 IP，数据链路 MAC，真实物理层，接收到之后再一层层扒皮。

## DNS 解析的具体过程

DNS 域名解析就是把域名翻译成 ip 地址的过程，例如将 www.baidu.com 翻译成 1.2.3.4 这个 IP，总共分为以下步骤：

- 浏览器缓存检查：浏览器首先会检查自身 DNS 缓存，这个缓存只能容纳 1000 条，且缓存时间比较短，只有一分钟。如果没有查到缓存，则进行下一步
- 操作系统缓存检查 + hosts 解析：如果浏览器缓存没有查到，则会查找操作系统缓存的解析结果。Linux 可以通过 /etc/hosts 文件来设置域名对应的 ip，如果在这个文件查到了域名，会优先访问这里配置的 ip，并将这个结果缓存起来。缓存时间受域名失效时间和缓存大小控制的
- dns 解析 1：客户端通过浏览器访问域名为 www.baidu.com 的网站，发起查询该域名 ip 的 dns 请求。该请求发送到本地 dns 服务器，本地 dns 服务区首先会检查自己的缓存记录，如果缓存中有此记录，就可以直接返回结果，否则本地 dns 服务器向根服务器发起请求
- dns 解析 2：本地 dns 服务器向根服务器发送 dns 请求，请求域名为 www.baidu.com 的 ip 地址
- dns 解析 3：根服务器经过查询，没有找到该域名及 ip 的对应关系，告诉本地 dns 服务器，可以到 .com 域名服务器上继续查询
- dns 解析 4：本地 dns 服务器向 .com 服务器发送 dns 请求，请求域名为 www.baidu.com 的 ip 地址
- dns 解析 5：.com 服务器接收到请求后，不会立即返回对应 ip，而是告诉本地 dns 服务器，可以在 baidu.com 的域名服务器上请求获取 ip 地址
- dns 解析 6：本地 dns 服务器向 baidu.com 服务器发送 dns 请求，请求域名为 www.baidu.com 的 ip 地址
- dns 解析 7：baidu.com 服务器在自己的缓存表中发现了该域名和 ip 地址的对应关系，并将 ip 地址返回给本地 dns 服务器
- dns 解析 8：本地 dns 服务器将获取到域名与对应的 ip 地址返回给客户端，并将结果缓存供下次查询

## TCP 拆包沾包的原因

- TCP 协议是基于字节流的传输协议，没有固定的分包边界。发送方将数据拆分成多个小的数据包进行传输，接收方再将这些数据包组合成完整的数据。在这个过程中可能会出现拆包和沾包现象
- 网络传输中的延迟和拥塞会影响数据包发送的速度和到达接收方的顺序，可能导致数据包的拆分和组合不规律
- 接收方缓冲区大小限制。当接收方缓冲区大小小于完整数据包大小，可能会发生拆包

解决方式：

- 在应用层实现数据包的边界识别，添加包头，包头中添加数据长度等信息
- 使用固定长度的数据包或特殊的分隔符，便于数据包识别边界
- 使用更高级的传输层协议，如 WebSocket，它在 TCP 的基础上添加了数据帧的概念，可以更好地解决拆包和沾包问题










DNS 域名解析，简单地说就是把域名翻译成 IP 地址。例如：把 www.baidu.com 这个域名翻译成对应 IP 220.181.38.251，这里只是举个例子。

